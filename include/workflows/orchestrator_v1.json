{
  "name": "orchestrator_v1",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -32,
        0
      ],
      "id": "bbb434a5-5eb5-41f6-a5d4-f67a566f1392",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [
        -32,
        192
      ],
      "id": "b9a6bf5a-80c0-4ea1-ad00-ce4d7fc4cef5",
      "name": "When chat message received",
      "webhookId": "1cefc77a-e019-4c86-9783-88089b29bb9f"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "months"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -32,
        384
      ],
      "id": "2201fd35-81ff-4dc2-a9c3-b6bc04076ee3",
      "name": "Schedule Trigger",
      "disabled": true
    },
    {
      "parameters": {
        "inputSource": "passthrough"
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -32,
        576
      ],
      "id": "a4901b06-34e8-4023-b3ad-0fd56ce60f5f",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3328,
        288
      ],
      "id": "80057ac6-daf3-4e30-a60c-cca10f8060b8",
      "name": "Return"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        192,
        288
      ],
      "id": "a881bdd3-d736-4fa8-8e61-c07a4cfa9208",
      "name": "Start"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        3104,
        288
      ],
      "id": "d0886845-1ac2-40ea-90de-0d7789dd415e",
      "name": "End"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "xn9V9henO2ZXcvom",
          "mode": "list",
          "cachedResultUrl": "/workflow/xn9V9henO2ZXcvom",
          "cachedResultName": "asserting_step_v1"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {}
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        864,
        288
      ],
      "id": "e79947cf-48d8-4fb3-a67c-794b1cd0eee9",
      "name": "Asserting Step"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "rpZrwxFvLpUiCjfF",
          "mode": "list",
          "cachedResultUrl": "/workflow/rpZrwxFvLpUiCjfF",
          "cachedResultName": "first_prompt_generator_v2"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1312,
        288
      ],
      "id": "8ce5d36e-e7db-46ec-b458-a01c89f5420d",
      "name": "First Prompt Generator"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "457e821e-dd10-4c63-9848-c317f75506a8",
              "name": "model",
              "value": "qwen2.5:3b",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        416,
        288
      ],
      "id": "8057ac8f-d1d5-48c0-a76d-ddde996eac6e",
      "name": "Define Model"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "891065ab-55c6-4209-9bd4-9cb25cebd35a",
              "name": "systemPrompt",
              "value": "=You are a Prompt Engineer AI. Your job is to create effective system prompts for another AI agent.|## Your TaskTransform the user's request into a clear, optimized system prompt for the target AI model.## Guidelines1. **Be Clear and Direct**   - Start with a clear role definition for the secondary agent   - Use precise, actionable language   - Break complex tasks into numbered steps   - Make instructions self-contained2. **Include Essential Context**   - Incorporate relevant background from the user's prompt   - Include the context information when it's not \"None\"   - Don't overwhelm with unnecessary details   - Focus on what the secondary agent needs to know3. **Structure for Success**   - Define clear objectives   - Specify output format when needed   - Set appropriate constraints and boundaries   - Include examples when they would be helpful   - Use formatting the model handles well4. **Optimize for Target Model**   - Match prompt style to the model's capabilities   - Keep instructions focused and concise   - Consider the model's strengths and limitations   - Use structure that aids comprehension## What to ProvideFor each prompt transformation, you must generate:1. **systemPrompt**: The complete system prompt that will be given to the secondary AI agent2. **userIntent**: A brief description of what the user is trying to accomplish3. **keyRequirements**: A list of the critical requirements for the task (3-5 items)4. **optimizationNotes**: Explanation of how you optimized this prompt for the target model## Important Rules- Always preserve the user's original intent completely- Include context information when it's provided- Make prompts self-contained and clear- Consider what output format would best serve the user's needs- Optimize your language and structure for the target model specified",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        640,
        288
      ],
      "id": "89e02f4d-d587-4b38-bd8d-8aa065dabc8c",
      "name": "Define System Prompt"
    },
    {
      "parameters": {
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1536,
        288
      ],
      "id": "432167ca-8f90-4756-8095-9444766710ba",
      "name": "Parse first output"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "2upP7YeQ0P1Yv93h",
          "mode": "list",
          "cachedResultUrl": "/workflow/2upP7YeQ0P1Yv93h",
          "cachedResultName": "second_prompt_generator_v1"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {}
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1760,
        288
      ],
      "id": "30c312bf-e47d-41f7-951a-54e94b1a0e17",
      "name": "Second Prompt Generator"
    },
    {
      "parameters": {
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1984,
        288
      ],
      "id": "a1a74107-5f25-4ae2-bb40-3dec2da76ccb",
      "name": "Parse second output"
    },
    {
      "parameters": {
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1088,
        288
      ],
      "id": "dfd41886-8e5c-4dda-9fc2-2727dafbcfe0",
      "name": "Parse input"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "pyOCF7tB6IIfAP6u",
          "mode": "list",
          "cachedResultUrl": "/workflow/pyOCF7tB6IIfAP6u",
          "cachedResultName": "embedding_step_v2"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        2208,
        288
      ],
      "id": "cda2f3fd-caec-4e4f-98ca-f7a0d6f23fc4",
      "name": "Embedding Generator"
    },
    {
      "parameters": {
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2432,
        288
      ],
      "id": "4a63c21a-8fe9-4db9-aeee-a6427797d4a3",
      "name": "Parse embeddings"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "gLckoq7auSgdtOMk",
          "mode": "list",
          "cachedResultUrl": "/workflow/gLckoq7auSgdtOMk",
          "cachedResultName": "persistence_step_v2"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        2656,
        288
      ],
      "id": "e93c0806-0926-4c70-a93a-c8d668959fbd",
      "name": "Persistence Step"
    },
    {
      "parameters": {
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2880,
        288
      ],
      "id": "acf77270-c60e-438c-b8b9-2afb92b99b8c",
      "name": "Parse result"
    }
  ],
  "pinData": {},
  "connections": {
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "Start",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Start",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Start",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "Start",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Start": {
      "main": [
        [
          {
            "node": "Define Model",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "End": {
      "main": [
        [
          {
            "node": "Return",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Asserting Step": {
      "main": [
        [
          {
            "node": "Parse input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "First Prompt Generator": {
      "main": [
        [
          {
            "node": "Parse first output",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Define Model": {
      "main": [
        [
          {
            "node": "Define System Prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Define System Prompt": {
      "main": [
        [
          {
            "node": "Asserting Step",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse first output": {
      "main": [
        [
          {
            "node": "Second Prompt Generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Second Prompt Generator": {
      "main": [
        [
          {
            "node": "Parse second output",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse second output": {
      "main": [
        [
          {
            "node": "Embedding Generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse input": {
      "main": [
        [
          {
            "node": "First Prompt Generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embedding Generator": {
      "main": [
        [
          {
            "node": "Parse embeddings",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse embeddings": {
      "main": [
        [
          {
            "node": "Persistence Step",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Persistence Step": {
      "main": [
        [
          {
            "node": "Parse result",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse result": {
      "main": [
        [
          {
            "node": "End",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "0830b0b2-533a-4ec8-a9db-52c42ac8fc55",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "5477294f5d3a06ea145a32cfe84f2a422eac233f472a30914283db00ed658afe"
  },
  "id": "8f8PQgPy6rDWvpGM",
  "tags": [
    {
      "updatedAt": "2025-11-30T20:56:33.087Z",
      "createdAt": "2025-11-30T20:56:33.087Z",
      "id": "yvZJPTtKvYrUjXfA",
      "name": "level1"
    }
  ]
}